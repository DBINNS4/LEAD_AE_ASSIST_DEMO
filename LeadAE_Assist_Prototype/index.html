<!DOCTYPE html>
<html lang="">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <meta http-equiv="Content-Security-Policy" content="default-src 'self' file:; connect-src 'self' http://127.0.0.1:32123 ws://127.0.0.1:32123; script-src 'self' 'unsafe-eval' 'unsafe-inline' file:; style-src 'self' 'unsafe-inline'; img-src 'self' data:;">
  <title>LEAD AE ‚Äì ASSIST</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
    <div id="app">
      <div id="titlebar">
        <!-- üåô Light/Dark Mode Toggle -->
        <div class="theme-toggle-left">
          <input type="checkbox" id="theme-toggle" class="l" title="Toggle Light/Dark Mode" />
        </div>

        <div id="panel-toolbar-wrapper">
          <div id="panel-toolbar"></div>
        </div>
      </div>
      <div class="title-divider"></div>
      <div id="window-content">

      <!-- ====================
           üìö Sidebar Navigation
           ==================== -->
      <aside class="sidebar">

      <ul>
        <!-- üîó Panel Navigation Tabs -->
        <li class="tab lae-navbtn" data-panel="adobe-utilities" data-i18n="adobeAutomate">
          <span class="lae-navbtn__text">Adobe Automate</span>
        </li>
        <li class="tab lae-navbtn" data-panel="ingest" data-i18n="ingest">
          <span class="lae-navbtn__text">Ingest</span>
        </li>
        <li class="tab lae-navbtn" data-panel="transcode" data-i18n="transcode">
          <span class="lae-navbtn__text">Transcode</span>
        </li>
        <li class="tab lae-navbtn" data-panel="transcribe" data-i18n="transcribe">
          <span class="lae-navbtn__text">Transcribe</span>
        </li>
        <li class="tab lae-navbtn" data-panel="project-organizer" data-i18n="projectOrganizer">
          <span class="lae-navbtn__text">Project Organizer</span>
        </li>
        <li class="tab lae-navbtn" data-panel="nle-utilities" data-i18n="nleUtilities">
          <span class="lae-navbtn__text">NLE Utilities</span>
        </li>
        <li class="tab lae-navbtn" data-panel="preferences" data-i18n="preferences">
          <span class="lae-navbtn__text">Preferences</span>
        </li>
        <li class="tab lae-navbtn" data-panel="log-viewer" data-i18n="logViewer">
          <span class="lae-navbtn__text">Log Viewer</span>
        </li>
        <li class="tab lae-navbtn" data-panel="speed-test" data-i18n="speedTest">
          <span class="lae-navbtn__text">Speed Test</span>
        </li>
      </ul>

      <div class="sidebar-logo">
        <a href="https://www.leadae.com" target="_blank">
          <img src="images/lead_ae_logo.jpeg" alt="LEAD AE Logo" />
        </a>
      </div>
      </aside>

<!-- ====================
 üìã Main Content Area
 ==================== -->
<main class="main-panel hidden">

<!-- ==================== ADOBE AUTOMATE PANEL ==================== -->

<div id="adobe-utilities" class="panel-section">
  <div class="section">
    <div id="adobe-lock-wrapper">
      <div class="panel-toolbar-controls">
      <button class="delete-preset-btn" data-panel="adobe-utilities" title="Delete Preset" disabled>üóëÔ∏è</button>
      <div class="dropdown-wrapper dropdown-display">
        <input class="chosen-value" type="text" placeholder="" data-i18n="presetsPlaceholder">
        <ul class="value-list"></ul>
        <span class="dropdown-arrow"></span>
        <input type="hidden" id="adobe-utilities-preset" name="adobe-utilities-preset">
      </div>
      <button id="save-config" data-i18n="save"></button>
      <button id="load-config" data-i18n="load"></button>
      <div class="tooltip-container">
        <div class="icon">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <circle cx="12" cy="12" r="10" />
            <line x1="12" y1="16" x2="12" y2="12" />
            <line x1="12" y1="8" x2="12" y2="8" />
          </svg>
        </div>
        <div class="tooltip tooltip-bottom" id="automation-requirements-tooltip"></div>
      </div>
      <div class="reconnect-toolbar-button">
        <div class="container">
          <input type="checkbox" id="reconnect-checkbox" />
          <label for="reconnect-checkbox" class="button" aria-label="Reconnect" title="Reconnect">
            <span class="icon">
              <svg viewBox="0 0 24 24" aria-hidden="true" focusable="false">
                <path
                  d="M17.65 6.35A7.95 7.95 0 0 0 12 4a8 8 0 1 0 7.75 6.27h-2.02A6 6 0 1 1 12 6a5.96 5.96 0 0 1 4.24 1.76L14 10h6V4l-2.35 2.35Z"
                />
              </svg>
            </span>
          </label>
        </div>
      </div>
    </div>
    <!-- Input -->
    <h3>Input</h3>
    <div class="field-group horizontal">
      <button id="adobe-select-source" data-i18n="selectSource"></button>
      <textarea id="adobe-source-path" data-i18n="noSourceSelected" placeholder="" readonly rows="1"></textarea>
    </div>

    <!-- ‚ñ∂ File & Metadata Grid (new) -->
    <div class="file-info-scroll">
      <div id="adobe-file-info" class="file-info-grid placeholder">
        <div class="file-info-grid-header">File</div>
        <div class="file-info-grid-header">Format</div>
        <div class="file-info-grid-header">Resolution</div>
        <div class="file-info-grid-header">FPS</div>
        <div class="file-info-grid-header">Audio</div>
        <div class="file-info-grid-header">Duration</div>
      </div>
    </div>
    <!-- Output -->
    <h3>Output</h3>
    <div class="field-group horizontal">
      <button id="adobe-select-dest" data-i18n="selectDestination"></button>
      <input type="text" id="adobe-dest-path" data-i18n="noDestinationSelected" placeholder="" readonly />
    </div>

    <!-- Import Options -->
    <details>
      <summary><strong><span data-i18n="importOptions"></span></strong></summary>

      <div class="checkbox-grid spaced-top">
        <label><input type="checkbox" id="adobe-import-premiere" /><span data-i18n="importIntoPremiere"></span></label>
        <label><input type="checkbox" id="adobe-generate-proxies" /><span data-i18n="generateProxies"></span></label>
        <label><input type="checkbox" id="adobe-create-bins" /><span data-i18n="createPremiereBins"></span></label>
      </div>

      <!-- Proxy Settings -->
      <div class="heading-with-tooltip">
        <h3 data-i18n="proxySettings"></h3>
        <div class="tooltip-container">
          <div class="icon">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <circle cx="12" cy="12" r="10" />
              <line x1="12" y1="16" x2="12" y2="12" />
              <line x1="12" y1="8" x2="12" y2="8" />
            </svg>
          </div>
          <div class="tooltip" id="proxy-settings-tooltip"></div>
        </div>
      </div>
      <div class="proxy-settings-wrapper">
        <div class="field-group horizontal" id="adobe-proxy-dest-row" style="display: none;">
          <button id="adobe-select-proxy-dest" data-i18n="selectProxyDestination"></button>
          <input type="text" id="adobe-proxy-dest-path" data-i18n="noProxyDestinationSelected" placeholder="" readonly />
        </div>
        <div class="field-group" id="adobe-proxy-preset-wrapper" style="display: none;">
          <div class="dropdown-wrapper full-width">
            <div class="dropdown-display">
              <input class="chosen-value" type="text" placeholder="" data-i18n="selectProxyPreset">
              <span class="dropdown-arrow"></span>
            </div>
            <ul class="value-list"></ul>
            <input type="hidden" id="adobe-proxy-preset" name="adobe-proxy-preset">
          </div>
          <div class="field-group horizontal" id="adobe-proxy-preset-controls">
            <button id="load-proxy-preset" data-i18n="loadPreset"></button>
            <button id="refresh-proxy-presets" data-i18n="refresh"></button>
          </div>
        </div>
      </div>

      <!-- Unassigned Files -->
      <h3 data-i18n="unassignedFiles"></h3>
      <div class="field-group" id="source-file-selection">
        <label data-i18n="dragFilesIntoBins"></label>
        <ul id="source-file-list" class="draggable-list"></ul>
      </div>

      <!-- Bin Setup -->
      <h3 data-i18n="binSetup"></h3>
      <div class="field-group" id="adobe-bin-selection">
        <label data-i18n="dragBinsToOrder"></label>
        <ul id="adobe-bin-list" class="draggable-list"></ul>
      </div>
      <div class="field-group">
        <input type="text" id="adobe-folder-name" data-i18n="newBinName" placeholder="" />
        <button id="add-folder" data-i18n="addBin"></button>
        <button id="add-subfolder" data-i18n="addSubBin"></button>
      </div>
    </details>

    <details>
      <summary class="heading-with-tooltip">
        <span class="summary-label" data-i18n="verificationLogging"></span>
        <div class="tooltip-container">
          <div class="icon">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                 stroke-linecap="round" stroke-linejoin="round">
              <circle cx="12" cy="12" r="10" />
              <line x1="12" y1="16" x2="12" y2="12" />
              <line x1="12" y1="8" x2="12" y2="8" />
            </svg>
          </div>
          <div class="tooltip" id="verification-logging-tooltip"></div>
        </div>
      </summary>

      <div class="checkbox-grid spaced-top">
        <label>
          <div class="dropdown-wrapper dropdown-display">
            <input class="chosen-value" type="text" placeholder="Verification Method">
            <ul class="value-list"></ul>
            <span class="dropdown-arrow"></span>
            <input type="hidden" id="adobe-checksum-method" name="adobe-checksum-method">
          </div>
        </label>

        <label>
          <input type="checkbox" id="adobe-save-log" />
          <span data-i18n="saveLog"></span>
        </label>
      </div>
    </details>

    <details data-webhook-section>
      <summary><strong><span data-i18n="automationIntegration"></span></strong></summary>

      <div class="checkbox-grid spaced-top">
        <label><input type="checkbox" id="adobe-enable-n8n" /><span data-i18n="webhook"></span></label>
        <label><input type="checkbox" id="adobe-n8n-log" /><span data-i18n="sendLog"></span></label>
      </div>
      <input type="text" id="adobe-n8n-url" placeholder="" data-i18n="webhookUrlPlaceholderSimple" />
    </details>

    <details>
      <summary><strong><span data-i18n="ingestBehavior"></span></strong></summary>

      <div class="checkbox-grid spaced-top">
        <label><input type="checkbox" id="adobe-parallel" /><span data-i18n="parallelCopy"></span></label>
        <label><input type="checkbox" id="adobe-auto-threads" /><span data-i18n="autoThreads"></span></label>
        <label><input type="checkbox" id="adobe-retry-failures" /><span data-i18n="retryFailures"></span></label>
      </div>

      <div class="field-group horizontal">
        <label><strong data-i18n="threads"></strong></label>
        <span id="adobe-concurrency-value">3</span>
        <input type="range" id="adobe-concurrency-slider" min="1" max="10" />
      </div>
    </details>

    <!-- Ingest Controls -->
    <textarea id="adobe-notes" placeholder="" data-i18n="adobeAutomateNotes"></textarea>
    <div class="field-group adobe-controls-row" id="adobe-lock-controls">
      <button id="start-adobe-utilities" data-i18n="automate"></button>
      <button id="reset-utilities" class="btn-danger" data-i18n="reset"></button>
      <button id="cancel-adobe-utilities" class="btn-danger" data-i18n="cancel">Cancel</button>

      <!-- Progress bar + percent -->
      <div id="loader-inline">
        <progress id="adobe-progress" value="0" max="100"></progress>
        <output for="adobe-progress"></output>
      </div>

      <!-- ‚úÖ Hamster Wheel (right aligned) -->
      <div id="cep-job-status" style="display:none;">
        <div class="wheel-and-hamster"></div>
      </div>
    </div>
    </div>

    <ul
      id="cep-task-list"
      aria-live="polite"
    ></ul>
    <h3><span data-i18n="summary"></span></h3>
    <textarea id="job-preview-box" class="status-log" aria-label="Job Preview" readonly rows="1"></textarea>
  </div>
</div>

  <!-- ==================== INGEST PANEL ==================== -->

<div id="ingest" class="panel-section">
  <div class="section">
    <div class="panel-toolbar-controls">
      <button class="delete-preset-btn" data-panel="ingest" title="Delete Preset" disabled>üóëÔ∏è</button>
      <div class="dropdown-wrapper dropdown-display">
        <input class="chosen-value" type="text" placeholder="" data-i18n="presetsPlaceholder">
        <ul class="value-list"></ul>
        <span class="dropdown-arrow"></span>
        <input type="hidden" id="ingest-preset" name="ingest-preset">
      </div>
      <button id="ingest-save-config" data-i18n="save"></button>
      <button id="ingest-load-config" data-i18n="load"></button>

      <!-- Ingest panel overview tooltip (top-right, like Adobe Automate) -->
      <div class="tooltip-container">
        <div class="icon">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor"
               stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <circle cx="12" cy="12" r="10" />
            <line x1="12" y1="16" x2="12" y2="12" />
            <line x1="12" y1="8"  x2="12" y2="8" />
          </svg>
        </div>
        <div class="tooltip tooltip-bottom" id="ingest-overview-tooltip"></div>
      </div>
    </div>

    <div id="ingest-lock-wrapper">

      <!-- Input -->
      <h3>Input</h3>
      <div class="field-group horizontal">
        <button id="select-source" data-i18n="selectSource"></button>
        <input type="text" id="source-path" placeholder="" data-i18n="noSourceSelected" readonly />
      </div>

      <!-- Output -->
      <h3>Output</h3>
      <div class="field-group horizontal">
        <button id="select-destination" data-i18n="selectDestination"></button>
        <input type="text" id="destination-path" placeholder="" data-i18n="noDestinationSelected" readonly />
      </div>
      <div class="field-group horizontal">
        <button id="select-backup" data-i18n="selectBackup"></button>
        <input type="text" id="backup-path" placeholder="" data-i18n="noBackupSelected" readonly />
      </div>
      <!-- Output & Clone Options -->
      <div class="checkbox-grid">
        <label><input type="checkbox" id="dualCopy" /><span data-i18n="enableBackup"></span></label>
        <label><input type="checkbox" id="autoFolder" /><span data-i18n="autoCreateFolder"></span></label>
        <label><input type="checkbox" id="enable-clone" /><span>Clone Mode</span></label>
      </div>

      <!-- Clone Section (revealed when enabled) -->
      <div id="clone-options" class="clone-options spaced-top">
        <h3><span data-i18n="folderFilters"></span></h3>
        <div class="field-group horizontal">
          <input type="text" id="clone-folder-filter" placeholder="" data-i18n="filterFoldersPlaceholder" />
          <label><input type="checkbox" id="clone-select-all-folders" /><span data-i18n="selectAll"></span></label>
          <label><input type="checkbox" id="clone-show-file-count" /><span data-i18n="showFileCount"></span></label>

          <!-- Clone Mode tooltip ‚Äì same positioning style as Verification & Logging -->
          <div class="tooltip-container clone-mode-tooltip-container">
            <div class="icon">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor"
                   stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <circle cx="12" cy="12" r="10" />
                <line x1="12" y1="16" x2="12" y2="12" />
                <line x1="12" y1="8"  x2="12" y2="8" />
              </svg>
            </div>
            <div class="tooltip" id="clone-mode-tooltip"></div>
          </div>
        </div>
        <div id="clone-folder-tree" class="status-log folder-tree"><span data-i18n="folderTreePlaceholder"></span></div>
      </div>

<!-- File Handling Options -->
<details>
  <summary><strong><span data-i18n="fileHandlingOptions"></span></strong></summary>

  <div class="checkbox-grid spaced-top">
    <label><input type="checkbox" id="skip-duplicates" /><span data-i18n="skipDuplicates"></span></label>
    <label><input type="checkbox" id="flattenStructure" /><span data-i18n="flattenStructure"></span></label>
  </div>

  <div class="field-group vertical-stack">
    <label for="filter-include" data-i18n="includeExtensions"></label>
    <input type="text" id="filter-include" placeholder=".mov,.mp4,.wav" />
    <label for="filter-exclude" data-i18n="excludeExtensions"></label>
    <input type="text" id="filter-exclude" placeholder=".tmp,.db,.DS_Store" />
  </div>

</details>

<details>
  <summary class="heading-with-tooltip">
    <span class="summary-label" data-i18n="verificationLogging"></span>
    <div class="tooltip-container">
      <div class="icon">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
             stroke-linecap="round" stroke-linejoin="round">
          <circle cx="12" cy="12" r="10" />
          <line x1="12" y1="16" x2="12" y2="12" />
          <line x1="12" y1="8" x2="12" y2="8" />
        </svg>
      </div>
      <div class="tooltip" id="verification-logging-tooltip"></div>
    </div>
  </summary>

  <div class="checkbox-grid spaced-top">
    <label>
      <div class="dropdown-wrapper dropdown-display">
        <input class="chosen-value" type="text" placeholder="Verification Method">
        <ul class="value-list"></ul>
        <span class="dropdown-arrow"></span>
        <input type="hidden" id="checksum-method" name="checksum-method">
      </div>
    </label>

    <label>
      <input type="checkbox" id="saveLog" />
      <span data-i18n="saveLog"></span>
    </label>

  </div>

</details>

<!-- Ingest Behavior -->
<details data-webhook-section>
  <summary><strong><span data-i18n="automationIntegration"></span></strong></summary>

  <div class="checkbox-grid spaced-top">
    <label><input type="checkbox" id="enable-n8n" /><span data-i18n="webhook"></span></label>
    <label><input type="checkbox" id="n8n-log" /><span data-i18n="sendLog"></span></label>
  </div>
  <input type="text" id="n8n-url" placeholder="" data-i18n="webhookUrlPlaceholderSimple" />

</details>

<!-- Ingest Behavior -->
<details>
  <summary><strong><span data-i18n="ingestBehavior"></span></strong></summary>
<div class="checkbox-grid spaced-top">
  <label><input type="checkbox" id="ingest-parallel" /><span data-i18n="parallelCopy"></span></label>
  <label><input type="checkbox" id="ingest-auto-threads" /><span data-i18n="autoThreads"></span></label>
  <label><input type="checkbox" id="ingest-retry-failures" /><span data-i18n="retryFailures"></span></label>
</div>
<div class="field-group horizontal">
  <label><strong data-i18n="threads"></strong></label>
  <span id="concurrency-value">3</span>
  <input type="range" id="concurrency-slider" min="1" max="10" />
</div>

</details>

<!-- Watch Mode -->
<details>
  <summary><strong><span data-i18n="watchMode"></span></strong></summary>

    <div class="checkbox-grid spaced-top">
      <label><input type="checkbox" id="enable-watch-mode" /><span data-i18n="enableWatchMode"></span></label>
    </div>
    <span id="ingest-watch-state" class="watch-state"></span>
    </details>
    </div> <!-- end of ingest-lock-wrapper -->

    <textarea id="notes" placeholder="" data-i18n="ingestNotes"></textarea>

    <!-- Controls -->
    <div id="ingest-lock-controls" class="field-group adobe-controls-row">
      <button id="start-ingest" data-i18n="startIngest"></button>
      <button id="reset-ingest-fields" class="btn-danger" data-i18n="resetIngest"></button>
      <button id="cancel-ingest" class="btn-danger" data-i18n="cancelIngest"></button>

      <!-- Inline loader (same placement as Adobe Automate) -->
      <div id="ingest-loader-inline">
        <progress id="ingest-progress" max="100" value="0" style="display:none"></progress>
        <output for="ingest-progress" id="ingest-progress-output"></output>
      </div>

      <!-- Hamster hard-right -->
      <div id="ingest-job-status" style="display:none;">
        <div class="wheel-and-hamster"></div>
      </div>
    </div>

    <!-- Job Preview -->
    <h3><span data-i18n="summary"></span></h3>
    <textarea id="ingest-job-preview-box"
              class="status-log"
              aria-label="Job Preview"
              readonly
              rows="1"></textarea>

  </div>
</div>

<!-- ====================
   TRANSCODE PANEL
==================== -->
<div id="transcode" class="panel-section">
  <div class="section">
    <div class="panel-toolbar-controls">
      <button class="delete-preset-btn" data-panel="transcode" title="Delete Preset" disabled>üóëÔ∏è</button>
      <div class="dropdown-wrapper dropdown-display">
        <input class="chosen-value" type="text" placeholder="" data-i18n="presetsPlaceholder">
        <ul class="value-list"></ul>
        <span class="dropdown-arrow"></span>
        <input type="hidden" id="transcode-preset" name="transcode-preset">
      </div>
      <button id="saveTranscodePreset" data-i18n="save"></button>
      <button id="loadTranscodePreset" data-i18n="load"></button>

      <!-- Transcode panel overview tooltip (top-right, like Ingest/Adobe) -->
      <div class="tooltip-container">
        <div class="icon">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor"
               stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <circle cx="12" cy="12" r="10" />
            <line x1="12" y1="16" x2="12" y2="12" />
            <line x1="12" y1="8"  x2="12" y2="8" />
          </svg>
        </div>
        <div class="tooltip tooltip-bottom" id="transcode-overview-tooltip"></div>
      </div>
    </div>

      <div id="transcode-lock-wrapper">

    <!-- Input -->
    <h3>Input</h3>
    <div class="field-group">
        <button id="selectInputFiles" data-i18n="selectInputFiles"></button>
      <textarea id="inputFiles" placeholder="" data-i18n="noInputSelected" readonly rows="1"></textarea>
    </div>
    <div class="file-info-scroll">
      <div id="transcode-file-info" class="file-info-grid placeholder">
        <div class="file-info-grid-header">File</div>
        <div class="file-info-grid-header">Format</div>
        <div class="file-info-grid-header">Resolution</div>
        <div class="file-info-grid-header">FPS</div>
        <div class="file-info-grid-header">Audio</div>
        <div class="file-info-grid-header">Duration</div>
      </div>
    </div>

    <h3>Output</h3>
    <div class="field-group horizontal">
      <button id="selectOutput" data-i18n="selectOutput"></button>
      <input type="text" id="outputPath" placeholder="" data-i18n="noOutputSelected" readonly />
    </div>

<details>
    <summary>
    <strong><span data-i18n="videoSettings"></span></strong>
  </summary>

  <div class="checkbox-row">
    <label class="checkbox-label" for="transcode-match-source">
      <input type="checkbox" id="transcode-match-source" />
      <span data-i18n="matchSource"></span>
    </label>
  </div>

  <div class="video-grid-3col">
    <!-- Column 1 -->
    <div class="form-item">
      <label for="outputFormat" data-i18n="outputFormat"></label>
      <div class="dropdown-wrapper dropdown-display">
        <input class="chosen-value" type="text" placeholder="Output Format">
        <ul class="value-list"></ul>
        <span class="dropdown-arrow"></span>
        <input type="hidden" id="outputFormat" name="outputFormat">
      </div>
    </div>
    <div class="form-item">
      <label for="containerFormat" data-i18n="containerFormat"></label>
      <div class="dropdown-wrapper dropdown-display">
        <input class="chosen-value" type="text" placeholder="Container Format">
        <ul class="value-list"></ul>
        <span class="dropdown-arrow"></span>
        <input type="hidden" id="containerFormat" name="containerFormat">
      </div>
    </div>
    <!-- Column 2 -->
    <div class="form-item">
      <label for="resolution" data-i18n="resolution"></label>
      <div class="dropdown-wrapper dropdown-display">
        <input class="chosen-value" type="text" placeholder="Resolution">
        <ul class="value-list"></ul>
        <span class="dropdown-arrow"></span>
        <input type="hidden" id="resolution" name="resolution">
      </div>
    </div>
    <div class="form-item">
      <label for="frameRate" data-i18n="frameRate"></label>
      <div class="dropdown-wrapper dropdown-display">
        <input class="chosen-value" type="text" placeholder="Frame Rate">
        <ul class="value-list"></ul>
        <span class="dropdown-arrow"></span>
        <input type="hidden" id="frameRate" name="frameRate">
      </div>
    </div>
    <div class="form-item">
      <label for="crf" data-i18n="crf"></label>
      <input type="number" id="crf" class="compact" placeholder="e.g. 23" />
    </div>

    <!-- Column 3 -->
    <div class="form-item">
      <label for="pixelFormat" data-i18n="pixelFormat"></label>
      <div class="dropdown-wrapper dropdown-display">
        <input class="chosen-value" type="text" placeholder="Pixel Format">
        <ul class="value-list"></ul>
        <span class="dropdown-arrow"></span>
        <input type="hidden" id="pixelFormat" name="pixelFormat">
      </div>
    </div>
    <div class="form-item">
      <label for="colorRange" data-i18n="colorRange"></label>
      <div class="dropdown-wrapper dropdown-display">
        <input class="chosen-value" type="text" placeholder="Color Range">
        <ul class="value-list"></ul>
        <span class="dropdown-arrow"></span>
        <input type="hidden" id="colorRange" name="colorRange">
      </div>
    </div>
    <div class="form-item">
      <label for="fieldOrder" data-i18n="fieldOrder"></label>
      <div class="dropdown-wrapper dropdown-display">
        <input class="chosen-value" type="text" placeholder="Field Order">
        <ul class="value-list"></ul>
        <span class="dropdown-arrow"></span>
        <input type="hidden" id="fieldOrder" name="fieldOrder">
      </div>
    </div>
  </div>

</details>

    <details>
      <summary><strong><span data-i18n="audioSettings"></span></strong></summary>

      <div class="checkbox-grid spaced-top">
        <label><input type="checkbox" id="transcode-audio-only" /><span data-i18n="audioOnly"></span></label>
        <label><input type="checkbox" id="normalizeAudio" /><span data-i18n="normalizeAudio"></span></label>
      </div>

      <div class="video-grid-3col">
        <div class="form-item">
          <label for="audioCodec" data-i18n="audioCodec"></label>
          <div class="dropdown-wrapper dropdown-display">
            <input class="chosen-value" type="text" placeholder="Audio Codec">
            <ul class="value-list"></ul>
            <span class="dropdown-arrow"></span>
            <input type="hidden" id="audioCodec" name="audioCodec">
          </div>
        </div>

        <div class="form-item">
          <label for="channels" data-i18n="channels"></label>
          <div class="dropdown-wrapper dropdown-display">
            <input class="chosen-value" type="text" placeholder="Channels">
            <ul class="value-list"></ul>
            <span class="dropdown-arrow"></span>
            <input type="hidden" id="channels" name="channels">
          </div>
        </div>

        <div class="form-item">
          <label for="sampleRate" data-i18n="sampleRate"></label>
          <div class="dropdown-wrapper dropdown-display">
            <input class="chosen-value" type="text" placeholder="Sample Rate">
            <ul class="value-list"></ul>
            <span class="dropdown-arrow"></span>
            <input type="hidden" id="sampleRate" name="sampleRate">
          </div>
        </div>

        <div class="form-item">
          <label for="audioBitrate" data-i18n="audioBitrate"></label>
          <div class="dropdown-wrapper dropdown-display">
            <input class="chosen-value" type="text" placeholder="Audio Bitrate">
            <ul class="value-list"></ul>
            <span class="dropdown-arrow"></span>
            <input type="hidden" id="audioBitrate" name="audioBitrate">
          </div>
        </div>

        <div class="form-item">
          <label for="audioDelay" data-i18n="audioDelay"></label>
          <input type="number" id="audioDelay" placeholder="e.g. 50" class="compact" />
        </div>

      </div>
    </details>

    <details>
      <summary class="heading-with-tooltip">
        <span class="summary-label" data-i18n="verificationLogging"></span>
        <div class="tooltip-container">
          <div class="icon">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                 stroke-linecap="round" stroke-linejoin="round">
              <circle cx="12" cy="12" r="10" />
              <line x1="12" y1="16" x2="12" y2="12" />
              <line x1="12" y1="8" x2="12" y2="8" />
            </svg>
          </div>
          <!-- Transcode-specific tooltip ID -->
          <div class="tooltip" id="transcode-verification-tooltip"></div>
        </div>
      </summary>

      <div class="checkbox-grid spaced-top">
        <label>
          <div class="dropdown-wrapper dropdown-display">
            <input class="chosen-value" type="text" placeholder="Verification Method">
            <ul class="value-list">
              <li data-value="metadata">Duration / Frame</li>
              <li data-value="ssim_psnr">SSIM / PSNR</li>
            </ul>
            <span class="dropdown-arrow"></span>
            <input
              type="hidden"
              id="transcode-verification-method"
              name="transcode-verification-method"
              value="metadata"
            />
          </div>
        </label>

        <label>
          <input type="checkbox" id="transcode-save-log" />
          <span data-i18n="transcodeSaveLog"></span>
        </label>

      </div>
    </details>

    <details data-webhook-section>
      <summary><strong><span data-i18n="automationIntegration"></span></strong></summary>
      <div class="checkbox-grid spaced-top">
        <label><input type="checkbox" id="transcode-enable-n8n" /><span data-i18n="webhook"></span></label>
        <label><input type="checkbox" id="transcode-n8n-log" /><span data-i18n="sendLog"></span></label>
      </div>
      <input type="text" id="transcode-n8n-url" placeholder="" data-i18n="webhookUrlPlaceholderSimple" />
    </details>

    <details id="transcode-watch-wrapper">
      <summary><strong><span data-i18n="watchMode"></span></strong></summary>
      <div class="checkbox-grid spaced-top">
        <label><input type="checkbox" id="transcode-watch-mode" /><span data-i18n="transcodeWatchMode"></span></label>
        <span id="transcode-watch-state" class="watch-state"></span>
      </div>
    </details>

    <textarea id="transcode-notes" placeholder="" data-i18n="transcodeNotes"></textarea>

    <div class="field-group adobe-controls-row spaced-top" id="transcode-controls-row">
      <button id="startTranscode" data-i18n="startTranscode"></button>
      <button id="resetTranscode" class="btn-danger" data-i18n="resetTranscode"></button>
      <button id="cancelTranscode" class="btn-danger" data-i18n="cancelTranscode"></button>
      <div id="transcode-loader-inline">
        <progress id="transcode-progress" max="100" value="0" style="display:none"></progress>
        <output for="transcode-progress" id="transcode-progress-output"></output>
      </div>
      <div id="transcode-job-status" style="display:none;">
        <div class="wheel-and-hamster"></div>
      </div>
    </div>

    </div> <!-- end of transcode-lock-wrapper -->

    <!-- Job Preview (matches Ingest/Adobe pattern; always shows all option states) -->
    <h3><span data-i18n="summary"></span></h3>
    <textarea
      id="transcode-job-preview-box"
      class="status-log"
      aria-label="Job Preview"
      readonly
      rows="1"></textarea>

  </div>
</div>

      <!-- =========================
     PROJECT ORGANIZER PANEL
     ========================= -->
<div id="project-organizer" class="panel-section">
  <div class="section">
    <div class="panel-toolbar-controls">
      <button class="delete-preset-btn" data-panel="organizer" title="Delete Preset" disabled>üóëÔ∏è</button>
      <div class="dropdown-wrapper dropdown-display">
        <input class="chosen-value" type="text" placeholder="" data-i18n="presetsPlaceholder">
        <ul class="value-list"></ul>
        <span class="dropdown-arrow"></span>
        <input type="hidden" id="organizer-preset" name="organizer-preset">
      </div>
      <button id="organizer-save-config" data-i18n="saveConfig"></button>
      <button id="organizer-load-config" data-i18n="loadConfig"></button>

      <!-- üîπ Project Organizer overview tooltip ‚Äì SAME POSITION AS INGEST/TRANSCODE -->
      <div class="tooltip-container">
        <div class="icon">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor"
               stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <circle cx="12" cy="12" r="10" />
            <line x1="12" y1="16" x2="12" y2="12" />
            <line x1="12" y1="8"  x2="12" y2="8" />
          </svg>
        </div>
        <div class="tooltip tooltip-bottom" id="project-organizer-overview-tooltip"></div>
      </div>
    </div>

    <div class="field-group">
      <label><input type="checkbox" id="prepend-numbers" /><span data-i18n="prependNumbering"></span></label>
    </div>

    <!-- Folder Selection Panel -->
    <div class="field-group" id="folder-selection">
      <label data-i18n="dragFoldersToOrder"></label>
      <ul id="folder-list" class="draggable-list"></ul>
    </div>
    

    <!-- Custom Folder Input -->
    <div class="field-group">
  <input type="text" id="custom-folder-name" placeholder="" data-i18n="customFolderName" />
  <button id="add-custom-folder" data-i18n="addCustomFolder"></button>
  <button id="organizer-add-subfolder" data-i18n="addSubfolder"></button>
    </div>

    <!-- Root Naming Rules -->
    <div class="field-group project-name">
      <label for="root-folder-name" style="font-weight: 600; font-size: 1rem; margin-bottom: 0.25rem;"><span data-i18n="projectName"></span></label>
      <input type="text" id="root-folder-name" placeholder="" data-i18n="rootFolderPlaceholder" />
    </div>
    
    <!-- Save Location Setup -->
    <div class="field-group">
      <button id="select-output-location" data-i18n="selectOutputLocation"></button>
      <input type="text" id="output-location-path" placeholder="" data-i18n="outputPath" readonly />
    </div>

    <!-- Generate Buttons -->
    <div class="field-group">
      <button id="generate-project-folders" data-i18n="generateProjectFolders"></button>
      <button id="reset-project-organizer" class="btn-danger" data-i18n="resetProjectOrganizer"></button>
    </div>
        
    <!-- Folder Summary -->
    <h3><span data-i18n="summary"></span></h3>
    <div id="project-summary" class="status-log" data-i18n="noStructureDefined"></div>

  </div>
</div>


<!-- =========================
     NLE UTILITIES PANEL
     ========================= -->
<div id="nle-utilities" class="panel-section">
  <div class="section">
    <div class="panel-toolbar-controls">
      <button class="delete-preset-btn" data-panel="nle" title="Delete Preset" disabled>üóëÔ∏è</button>
      <div class="dropdown-wrapper dropdown-display">
        <input class="chosen-value" type="text" placeholder="" data-i18n="presetsPlaceholder">
        <ul class="value-list"></ul>
        <span class="dropdown-arrow"></span>
        <input type="hidden" id="nle-preset" name="nle-preset">
      </div>
      <button id="nle-save-config" data-i18n="saveConfig"></button>
      <button id="nle-load-config" data-i18n="loadConfig"></button>

      <!-- üîπ NLE Utilities overview tooltip (IN ROW, SAME POSITION AS OTHERS) -->
      <div class="tooltip-container">
        <div class="icon">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor"
               stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <circle cx="12" cy="12" r="10" />
            <line x1="12" y1="16" x2="12" y2="12" />
            <line x1="12" y1="8"  x2="12" y2="8" />
          </svg>
        </div>
        <div class="tooltip tooltip-bottom" id="nle-overview-tooltip"></div>
      </div>
    </div>

  <!-- Avid Utilities -->
  <details>
    <summary><strong><span data-i18n="avidUtilities"></span></strong></summary>

    <!-- Folder Selection -->
    <div class="field-group">
      <button id="avid-select-folder" data-i18n="avidSelectFolder"></button>
      <input type="text" id="avid-folder-path" placeholder="" data-i18n="noAvidFolderSelected" readonly />
    </div>

    <!-- Primary Buttons -->
    <div class="field-group">
      <button id="avid-delete-db" class="btn-danger" title="Folders should follow 'Avid MediaFiles/MXF' structure" data-i18n="avidDeleteDb"></button>
      <button id="avid-reset-site" class="btn-danger" data-i18n="avidResetSite"></button>
      <button id="avid-reset-user" class="btn-danger" data-i18n="avidResetUser"></button>
    </div>

    <!-- Secondary Action -->
    <div class="field-group">
      <button id="avid-rebuild-db" title="Folders should follow 'Avid MediaFiles/MXF' structure" data-i18n="avidRebuildDb"></button>
    </div>

    <!-- Shared Checkboxes -->
    <div class="field-group">
      <label><input type="checkbox" id="avid-scan-subfolders" /><span data-i18n="avidScanSubfolders"></span></label>
      <label><input type="checkbox" id="avid-backup-settings" /><span data-i18n="avidBackupSettings"></span></label>
    </div>

    <!-- Summary Log -->
    <div class="status-log" id="avid-summary" data-i18n="avidSummary"></div>
  </details>

    <!-- Adobe Automate -->
    <details>
      <summary><strong><span data-i18n="adobeUtilities"></span></strong></summary>
      
      <div class="field-group">
       <button id="adobe-select-folder" data-i18n="adobeSelectFolder"></button>
       <input type="text" id="adobe-folder-path" placeholder="" data-i18n="noAdobeFolderSelected" readonly />
     </div>

      <!-- Cache and Autosave Controls -->
      <div class="field-group">
        <button id="adobe-clear-cache" class="btn-danger" data-i18n="adobeClearCache"></button>
        <button id="adobe-delete-autosaves" class="btn-danger" data-i18n="adobeDeleteAutosaves"></button>
        <button id="adobe-remove-previews" class="btn-danger" data-i18n="adobeRemovePreviews"></button>
      </div>

      <!-- Cleanup Filters -->
<div class="field-group">
  <label><input type="checkbox" id="adobe-skip-recent" /><span data-i18n="adobeSkipRecent"></span></label>
  <input type="number" id="adobe-age-days" placeholder="" data-i18n="adobeAgeDays" min="1" />
</div>

    <div class="status-log" id="adobe-summary" data-i18n="adobeSummary"></div>
    </details>
    <!-- Full Panel Reset Button -->
    <div class="field-group spaced-top">
      <button id="reset-nle-utilities" class="btn-danger" data-i18n="resetNleUtilities"></button>
    </div>
  </div>
</div>

<!-- ========================
     PREFERENCES PANEL
     ======================== -->
<div id="preferences" class="panel-section">
  <div class="section">
    <div class="panel-toolbar-controls">
      <button class="delete-preset-btn" data-panel="prefs" title="Delete Preset" disabled>üóëÔ∏è</button>
      <div class="dropdown-wrapper dropdown-display">
        <input class="chosen-value" type="text" placeholder="" data-i18n="presetsPlaceholder">
        <ul class="value-list"></ul>
        <span class="dropdown-arrow"></span>
        <input type="hidden" id="prefs-preset" name="prefs-preset">
      </div>
      <button id="prefs-save-config">Save</button>
      <button id="prefs-load-config">Load</button>

      <!-- üîπ Preferences overview tooltip -->
      <div class="tooltip-container">
        <div class="icon">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor"
               stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <circle cx="12" cy="12" r="10" />
            <line x1="12" y1="16" x2="12" y2="12" />
            <line x1="12" y1="8"  x2="12" y2="8" />
          </svg>
        </div>
        <div class="tooltip tooltip-bottom" id="preferences-overview-tooltip"></div>
      </div>
    </div>

    <!-- General Preferences -->
    <h3>General</h3>

    <div class="field-group checkbox-grid">
      <label><input type="checkbox" id="system-notifications" /><span data-i18n="enableSystemNotifications"></span></label>
      <label><input type="checkbox" id="offline-mode" /><span data-i18n="enableOfflineMode"></span></label>
    </div>


    <h3 data-i18n="themeAppearance"></h3>
    <div class="field-group horizontal">
      <!-- Theme -->
      <div class="dropdown-wrapper dropdown-display">
        <input class="chosen-value" type="text" data-i18n="themePlaceholder" placeholder="Light/Dark">
        <ul class="value-list"></ul>
        <span class="dropdown-arrow"></span>
        <input type="hidden" id="theme-select" name="theme-select">
      </div>

      <!-- Language -->
      <div class="dropdown-wrapper dropdown-display">
        <input class="chosen-value" type="text" data-i18n="languagePlaceholder" placeholder="Language">
        <ul class="value-list"></ul>
        <span class="dropdown-arrow"></span>
        <input type="hidden" id="language-select" name="language-select">
      </div>

    </div>

<!-- AI Settings -->
<h3 data-i18n="aiSettings"></h3>
<div class="field-group" id="api-key-field">
  <label for="ai-api-key" data-i18n="aiApiKey"></label>
  <input type="text" id="ai-api-key" placeholder="Enter your API key here..." />
</div>

      <!-- Webhooks & Integration -->
      <div id="webhook-section">
        <h3 data-i18n="webhooksIntegration"></h3>
        <div class="field-group">
          <input type="text" id="webhook-url" data-i18n="webhookUrlPlaceholder" placeholder="Webhook URL (e.g., https://your.api/hook)" />
        </div>

        <div class="field-group checkbox-grid">
          <label><input type="checkbox" id="webhook-logging" /><span data-i18n="enableWebhookLogging"></span></label>
          <label><input type="checkbox" id="webhook-only-fail" /><span data-i18n="sendOnlyOnFailure"></span></label>
        </div>
      </div>
    <div class="field-group">
      <button id="reset-preferences" class="btn-danger">Reset Preferences</button>
    </div>
    <div class="field-group preferences-footer">
      <span id="app-version"></span>
      <a class="report-bug-link" href="https://www.leadae.com/bug-report" target="_blank" data-i18n="reportBug">Report Bug</a>
    </div>
  </div>
  <div id="prefs-toast" class="toast" data-i18n="preferencesSaved"></div>
</div>

<!-- =======================
     LOG VIEWER PANEL
     ======================= -->
<div id="log-viewer" class="panel-section">
  <div class="section">
    <div class="panel-toolbar-controls log-viewer-toolbar">
      <div class="log-viewer-header-text">
        Review past tasks, errors,<br>
        and export log summaries.
      </div>
      <div class="tooltip-container">
        <div class="icon">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor"
               stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <circle cx="12" cy="12" r="10" />
            <line x1="12" y1="16" x2="12" y2="12" />
            <line x1="12" y1="8"  x2="12" y2="8" />
          </svg>
        </div>
        <div class="tooltip tooltip-bottom" id="log-viewer-overview-tooltip"></div>
      </div>
    </div>

    <!-- Log Filters -->
    <h3><span data-i18n="logFilters"></span></h3>
    <div class="field-group">
      <label data-i18n="viewByDate"></label>
      <div class="dropdown-wrapper dropdown-display">
        <input class="chosen-value" type="text" placeholder="View by Date">
        <ul class="value-list"></ul>
        <span class="dropdown-arrow"></span>
        <input type="hidden" id="view-by-date" name="view-by-date">
      </div>
      <input type="date" id="log-start-date" />
      <input type="date" id="log-end-date" />

      <label data-i18n="viewByTool"></label>
      <div class="dropdown-wrapper dropdown-display">
        <input class="chosen-value" type="text" placeholder="View by Tool">
        <ul class="value-list"></ul>
        <span class="dropdown-arrow"></span>
        <input type="hidden" id="view-by-tool" name="view-by-tool">
      </div>

      <label><input type="checkbox" id="show-errors-only" /><span data-i18n="onlyErrorsWarnings"></span></label>
    </div>

    <!-- Log Search -->
    <h3>Log Display</h3>
    <div class="field-group">
      <input type="text" id="log-search" placeholder="" data-i18n="logSearch" />
      <label><input type="checkbox" id="include-system-logs" /><span data-i18n="includeSystemLogs"></span></label>
    </div>

    <!-- Live Log Output -->
     <div id="live-log-view" class="status-log" data-i18n="logsWillAppearHere"></div>

    <div class="field-group horizontal spaced-top">
      <button id="expand-task-details" data-i18n="expandTaskDetails"></button>
      <button id="reset-log-viewer" class="btn-danger" data-i18n="resetViewer"></button>
    </div>
    
    <!-- Export Section -->
    <h3><span data-i18n="exportLogs"></span></h3>
    <div class="field-group">
      <label>Export Format</label>
      <div class="dropdown-wrapper dropdown-display">
        <input class="chosen-value" type="text" placeholder="Export Format">
        <ul class="value-list"></ul>
        <span class="dropdown-arrow"></span>
        <input type="hidden" id="export-format" name="export-format">
      </div>
    </div>

    <div class="field-group">
      <button id="select-export-folder" data-i18n="exportFolder"></button>
      <input type="text" id="export-folder-path" placeholder="Export folder path" readonly />
    </div>

    <button id="export-log-btn" data-i18n="exportLogs"></button>
    <div id="log-toast" class="toast" data-i18n="exportComplete"></div>
  </div>
</div>

<div id="transcribe" class="panel-section">
  <div class="section">
    <div class="panel-toolbar-controls">
      <button class="delete-preset-btn" data-panel="transcribe" title="Delete Preset" disabled>üóëÔ∏è</button>
      <div class="dropdown-wrapper dropdown-display">
        <input class="chosen-value" type="text" placeholder="" data-i18n="presetsPlaceholder">
        <ul class="value-list"></ul>
        <span class="dropdown-arrow"></span>
        <input type="hidden" id="transcribe-preset" name="transcribe-preset">
      </div>
      <button id="transcribe-save-config" data-i18n="save"></button>
      <button id="transcribe-load-config" data-i18n="load"></button>

      <!-- üîπ Transcribe overview tooltip ‚Äì NEXT TO PRESETS, NOT ON THE FAR RIGHT -->
      <div class="tooltip-container">
        <div class="icon">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor"
               stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <circle cx="12" cy="12" r="10" />
            <line x1="12" y1="16" x2="12" y2="12" />
            <line x1="12" y1="8"  x2="12" y2="8" />
          </svg>
        </div>
        <div class="tooltip tooltip-bottom" id="transcribe-overview-tooltip"></div>
      </div>

      <!-- Spacer pushes ONLY the editor button to the far right -->
      <span class="toolbar-flex-spacer"></span>
      <button id="open-subtitle-editor" type="button">Open Editor‚Ä¶</button>
    </div>

    <div id="transcribe-lock-wrapper">

    <!-- Input -->
    <h3>Input</h3>
    <div class="field-group">
      <button id="transcribe-select-files" data-i18n="transcribeSelectFiles"></button>
      <textarea id="transcribe-files" data-i18n="transcribeNoSource" placeholder="" readonly rows="1"></textarea>
    </div>
    <div class="file-info-scroll">
      <div id="transcribe-file-info" class="file-info-grid placeholder">
        <div class="file-info-grid-header">File</div>
        <div class="file-info-grid-header">Format</div>
        <div class="file-info-grid-header">Resolution</div>
        <div class="file-info-grid-header">FPS</div>
        <div class="file-info-grid-header">Audio</div>
        <div class="file-info-grid-header">Duration</div>
      </div>
    </div>

    <!-- Output -->
    <h3>Output</h3>
    <div class="field-group">
      <button id="transcribe-output-select" data-i18n="transcribeOutputSelect"></button>
      <input type="text" id="transcribe-output-path" placeholder="" data-i18n="transcribeNoDestination" readonly />
    </div>

    <!-- Engine Settings -->
    <div class="heading-with-tooltip">
      <h3><span data-i18n="engineSettings"></span></h3>
      <div class="tooltip-container">
        <div class="icon">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor"
               stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <circle cx="12" cy="12" r="10" />
            <line x1="12" y1="16" x2="12" y2="12" />
            <line x1="12" y1="8"  x2="12" y2="8" />
          </svg>
        </div>
        <div class="tooltip" id="transcribe-engine-tooltip"></div>
      </div>
    </div>
    <div class="video-grid-4col">
      <div class="form-item">
        <label for="transcribe-engine" data-i18n="engine"></label>
        <div class="dropdown-wrapper dropdown-display">
          <input class="chosen-value" type="text" placeholder="Engine">
          <ul class="value-list"></ul>
          <span class="dropdown-arrow"></span>
          <input type="hidden" id="transcribe-engine" name="transcribe-engine">
        </div>
      </div>
      <div class="form-item">
        <label for="transcribe-language" data-i18n="language"></label>
        <div class="dropdown-wrapper dropdown-display">
          <input class="chosen-value" type="text" placeholder="Language">
          <ul class="value-list"></ul>
          <span class="dropdown-arrow"></span>
          <input type="hidden" id="transcribe-language" name="transcribe-language">
        </div>
      </div>
      <div class="form-item">
        <label for="transcribe-accuracy-mode" data-i18n="accuracy"></label>
        <div class="dropdown-wrapper dropdown-display">
          <input class="chosen-value" type="text" placeholder="Accuracy">
          <ul class="value-list"></ul>
          <span class="dropdown-arrow"></span>
          <input type="hidden" id="transcribe-accuracy-mode" name="transcribe-accuracy-mode">
        </div>
      </div>
      <div class="form-item">
        <label for="transcribe-confidence" data-i18n="confidence"></label>
        <div class="dropdown-wrapper dropdown-display">
          <input class="chosen-value" type="text" placeholder="Confidence">
          <ul class="value-list"></ul>
          <span class="dropdown-arrow"></span>
          <input type="hidden" id="transcribe-confidence" name="transcribe-confidence">
        </div>
      </div>
    </div>
    <div class="field-group horizontal">
      <label><input type="checkbox" id="transcribe-offline" /><span data-i18n="offlineOnly"></span></label>
      <label><input type="checkbox" id="transcribe-allow-fallback" /><span data-i18n="enableFallback"></span></label>
    </div>

    <!-- 2. Output Format Presets -->
    <h3><span data-i18n="Output Formats"></span></h3>

    <!-- Global timecode controls deprecated in favor of per-format mini panels.
         Kept in DOM as internal defaults only, not shown to the user. -->
    <div class="field-group horizontal timecode-toggle-row" style="display:none;">
      <label><input type="checkbox" id="out-timecodes" /><span data-i18n="includeTimecodes"></span></label>
    </div>
    <div id="timecode-fields" class="video-grid-3col" style="display:none;">
      <div class="form-item">
        <label for="transcribe-timecode-style">Timecode Format
        </label>
        <div class="dropdown-wrapper dropdown-display">
          <input class="chosen-value" type="text" placeholder="Timecode Format">
          <ul class="value-list"></ul>
          <span class="dropdown-arrow"></span>
          <input type="hidden" id="transcribe-timecode-style" name="transcribe-timecode-style">
        </div>
      </div>
      <div class="form-item">
        <label for="transcribe-fps">Frame Rate Override (FPS)
        </label>
        <input type="number" id="transcribe-fps" min="10" max="120" step="0.01" placeholder="Auto" />
      </div>
      <div class="form-item">
        <label for="transcribe-tc-start" data-i18n="startTimecodeOffset"></label>
        <input type="text" id="transcribe-tc-start" placeholder="01:00:00:00" />
      </div>
    </div>

    <pre id="sample-preview" class="status-log" data-i18n="selectFormatPreview"></pre>
    <div class="field-group">
      <div class="dropdown-wrapper dropdown-display">
        <input class="chosen-value" type="text" placeholder="Output Formats">
        <ul class="value-list"></ul>
        <span class="dropdown-arrow"></span>
        <input type="hidden" id="transcribe-output-formats" name="transcribe-output-formats">
      </div>
    </div>

    <!-- ‚¨áÔ∏è NEW: Plain Text (.txt) ‚Äî format-specific panel -->
    <details id="fmt-txt" class="format-options" data-format="txt" open style="display:none;">
      <summary><strong>Plain Text (.txt)</strong></summary>
      <div class="checkbox-grid fmt-txt-checkbox-row">
        <label class="checkbox-label">
          <input type="checkbox" id="fmt-txt-include-timecodes">
          Include Timecodes
        </label>
        <label class="checkbox-label">
          <input type="checkbox" id="fmt-txt-group-by-speaker">
          Group by Speaker
        </label>
        <label class="checkbox-label">
          <input type="checkbox" id="fmt-txt-include-speaker-names">
          Include Speaker Names
        </label>
      </div>
      <div class="video-grid-3col">
        <div class="form-item">
          <label for="fmt-txt-timecode-format">Timecode Format</label>
          <div class="dropdown-wrapper dropdown-display">
            <input class="chosen-value" type="text" placeholder="Timecode Format">
            <ul class="value-list">
              <li data-value="ndf">NDF ‚Äî HH:MM:SS:FF</li>
              <li data-value="df">DF ‚Äî HH:MM:SS;FF</li>
              <li data-value="ms">Milliseconds ‚Äî HH:MM:SS,mmm</li>
            </ul>
            <span class="dropdown-arrow"></span>
            <input type="hidden" id="fmt-txt-timecode-format" name="fmt-txt-timecode-format">
          </div>
        </div>
        <div class="form-item">
          <label for="fmt-txt-fps">Frame Rate Override (FPS)</label>
          <input type="number" id="fmt-txt-fps" min="1" max="120" step="0.001" placeholder="Auto" />
        </div>
        <div class="form-item">
          <label for="fmt-txt-tc-start">Start Timecode Offset</label>
          <input type="text" id="fmt-txt-tc-start" value="01:00:00:00" placeholder="01:00:00:00" />
        </div>
        <div class="form-item">
          <label for="fmt-txt-timestamp-placement">Timestamp Placement</label>
          <div class="dropdown-wrapper dropdown-display">
            <input class="chosen-value" type="text" placeholder="Timestamp Placement">
            <ul class="value-list">
              <li data-value="start_end">Start‚ÄìEnd</li>
              <li data-value="start">Start only</li>
              <li data-value="every_line">Every line</li>
              <li data-value="none">None</li>
            </ul>
            <span class="dropdown-arrow"></span>
            <input type="hidden" id="fmt-txt-timestamp-placement" name="fmt-txt-timestamp-placement">
          </div>
        </div>
        <div class="form-item">
          <label for="fmt-txt-speaker-style">Speaker Label Style</label>
          <div class="dropdown-wrapper dropdown-display">
            <input class="chosen-value" type="text" placeholder="Speaker Label Style">
            <ul class="value-list">
              <li data-value="title">Title Case</li>
              <li data-value="caps">ALL CAPS</li>
              <li data-value="raw">Raw</li>
            </ul>
            <span class="dropdown-arrow"></span>
            <input type="hidden" id="fmt-txt-speaker-style" name="fmt-txt-speaker-style">
          </div>
        </div>
      </div>
    </details>

    <!-- Final JSON (wrapped) ‚Äî format-specific panel -->
    <details id="fmt-finaljson" class="format-options" data-format="finalJson" open style="display:none;">
      <summary><strong>Final JSON (wrapped)</strong></summary>

      <div class="video-grid-3col">
        <div class="form-item">
          <label for="fmt-finaljson-timecode-format">Timecode Format</label>
          <div class="dropdown-wrapper dropdown-display">
            <input class="chosen-value" type="text" placeholder="Timecode Format">
            <ul class="value-list">
              <li data-value="ndf">NDF ‚Äî HH:MM:SS:FF</li>
              <li data-value="df">DF ‚Äî HH:MM:SS;FF</li>
              <li data-value="ms">Milliseconds ‚Äî HH:MM:SS,mmm</li>
            </ul>
            <span class="dropdown-arrow"></span>
            <input type="hidden" id="fmt-finaljson-timecode-format" name="fmt-finaljson-timecode-format">
          </div>
        </div>
        <div class="form-item">
          <label for="fmt-finaljson-fps">Frame Rate Override (FPS)</label>
          <input type="number" id="fmt-finaljson-fps" min="1" max="120" step="0.001" placeholder="Auto" />
        </div>
        <div class="form-item">
          <label for="fmt-finaljson-tc-start">Start Timecode Offset</label>
          <input type="text" id="fmt-finaljson-tc-start" placeholder="01:00:00:00" />
        </div>
        <div class="form-item">
          <label class="checkbox-label">
            <input type="checkbox" id="fmt-finaljson-pretty" checked>
            Pretty print (2-space)
          </label>
        </div>
      </div>
    </details>

    <!-- SubRip (.srt) ‚Äî no per-format mini-panel.
         SRT now behaves like XML: only the main "Output Formats" dropdown controls whether it‚Äôs generated. -->

    <!-- WebVTT (.vtt) ‚Äî format-specific panel -->
    <details id="fmt-vtt" class="format-options" data-format="vtt" open style="display:none;">
      <summary><strong>WebVTT (.vtt)</strong></summary>

      <div class="video-grid-3col align-end">

        <!-- Include Speaker Names -->
        <div class="form-item">
          <label class="checkbox-label nowrap">
            <input type="checkbox" id="fmt-vtt-include-speaker-names">
            Include Speaker Names
          </label>
        </div>

        <!-- Speaker Label Style dropdown (NO visible header label) -->
        <div class="form-item">
          <div class="dropdown-wrapper dropdown-display">
            <input class="chosen-value" type="text" placeholder="Speaker Label Style">
            <ul class="value-list">
              <li data-value="title">Title Case</li>
              <li data-value="caps">ALL CAPS</li>
              <li data-value="raw">Raw</li>
            </ul>
            <span class="dropdown-arrow"></span>
            <input type="hidden" id="fmt-vtt-speaker-style" name="fmt-vtt-speaker-style">
          </div>
        </div>

        <!-- VTT style metadata toggle (per-format) -->
        <div class="form-item">
          <label>
            <input type="checkbox" id="fmt-vtt-include-style" />
            Include WebVTT style metadata
          </label>
        </div>
      </div>

      <!-- WebVTT subtitle shaping options (moved from Subtitle Options) -->
      <div class="video-grid-3col">
        <div class="form-item">
          <label for="sub-max-chars" data-i18n="maxCharsPerLine"></label>
          <input type="number" id="sub-max-chars" value="42" />
        </div>
        <div class="form-item">
          <label for="sub-max-lines" data-i18n="maxLinesPerBlock"></label>
          <input type="number" id="sub-max-lines" value="2" />
        </div>
        <div class="form-item">
          <label for="sub-max-duration" data-i18n="maxSubtitleDuration"></label>
          <input type="number" step="0.1" id="sub-max-duration" value="6.0" />
        </div>
      </div>
    </details>

    <!-- Scenarist SCC (.scc) ‚Äî format-specific mini panel -->
    <details id="fmt-scc" class="format-options" data-format="scc" open style="display:none;">
      <summary><strong>Scenarist Closed Captions (.scc)</strong></summary>

      <!-- Shaping (SCC defaults) -->
      <div class="video-grid-3col">
        <div class="form-item">
          <label for="fmt-scc-max-chars">Max characters per line</label>
          <input type="number" id="fmt-scc-max-chars" value="32" />
        </div>
        <div class="form-item">
          <label for="fmt-scc-max-lines">Max lines per subtitle block</label>
          <input type="number" id="fmt-scc-max-lines" value="2" />
        </div>
        <div class="form-item">
          <label for="fmt-scc-max-duration">Max subtitle duration (sec.)</label>
          <input type="number" step="0.1" id="fmt-scc-max-duration" value="6.0" />
        </div>
      </div>

      <!-- Header font comment (family + size) -->
      <div class="video-grid-3col align-end">
        <div class="form-item">
          <label for="fmt-scc-font-name">Font family</label>
          <input type="text" id="fmt-scc-font-name" placeholder="Helvetica" value="Helvetica" />
        </div>
        <div class="form-item">
          <label for="fmt-scc-font-size">Font size (px)</label>
          <input type="number" id="fmt-scc-font-size" value="24" />
        </div>
        <div class="form-item">
          <em style="opacity:.8;">(Added as ‚Äú// FONT: Family Size px‚Äù in the SCC header)</em>
        </div>
      </div>
    </details>

    <!-- Scripted (CSV/DOCX) ‚Äî format-specific panel -->
    <details id="fmt-script" class="format-options" data-format="script" open style="display:none;">
      <summary><strong>Scripted (CSV/DOCX)</strong></summary>

      <!-- Row 1: core Scripted checkboxes -->
      <div class="video-grid-3col align-end">
        <div class="form-item">
          <label class="checkbox-label nowrap">
            <input type="checkbox" id="fmt-script-include-timecodes">
            Include Timecodes
          </label>
        </div>

        <div class="form-item">
          <label class="checkbox-label nowrap">
            <input type="checkbox" id="fmt-script-include-speaker-names">
            Include Speaker Names
          </label>
        </div>

        <div class="form-item">
          <label class="checkbox-label nowrap">
            <input type="checkbox" id="fmt-script-group-by-speaker">
            Group by Speaker
          </label>
        </div>
      </div>

      <!-- Row 2: Timestamp placement + speaker label style + export type -->
      <div class="video-grid-3col">
        <div class="form-item">
          <label for="fmt-script-timestamp-placement">Timestamp Placement</label>
          <div class="dropdown-wrapper dropdown-display">
            <input class="chosen-value" type="text" placeholder="Timestamp Placement">
            <ul class="value-list">
              <li data-value="start_end">Start‚ÄìEnd</li>
              <li data-value="start">Start only</li>
              <li data-value="every_line">Every line</li>
              <li data-value="none">None</li>
            </ul>
            <span class="dropdown-arrow"></span>
            <input type="hidden" id="fmt-script-timestamp-placement" name="fmt-script-timestamp-placement">
          </div>
        </div>

        <div class="form-item">
          <label for="fmt-script-speaker-style">Speaker Label Style</label>
          <div class="dropdown-wrapper dropdown-display">
            <input class="chosen-value" type="text" placeholder="Speaker Label Style">
            <ul class="value-list">
              <li data-value="title">Title Case</li>
              <li data-value="caps">ALL CAPS</li>
              <li data-value="raw">Raw</li>
            </ul>
            <span class="dropdown-arrow"></span>
            <input type="hidden" id="fmt-script-speaker-style" name="fmt-script-speaker-style">
          </div>
        </div>

        <div class="form-item">
          <label for="fmt-script-export">Export Type</label>
          <div class="dropdown-wrapper dropdown-display">
            <input class="chosen-value" type="text" placeholder="Export Type">
            <ul class="value-list">
              <li data-value="csv">CSV (FCP7-style)</li>
              <li data-value="docx">DOCX (Word)</li>
            </ul>
            <span class="dropdown-arrow"></span>
            <input type="hidden" id="fmt-script-export" name="fmt-script-export">
          </div>
        </div>
      </div>

      <!-- Row 3: Timecode specifics scoped to Scripted -->
      <div class="video-grid-3col">
        <div class="form-item">
          <label for="fmt-script-timecode-format">Timecode Format</label>
          <div class="dropdown-wrapper dropdown-display">
            <input class="chosen-value" type="text" placeholder="Timecode Format">
            <ul class="value-list">
              <li data-value="ndf">NDF ‚Äî HH:MM:SS:FF</li>
              <li data-value="df">DF ‚Äî HH:MM:SS;FF</li>
              <li data-value="ms">Milliseconds ‚Äî HH:MM:SS,mmm</li>
            </ul>
            <span class="dropdown-arrow"></span>
            <input type="hidden" id="fmt-script-timecode-format" name="fmt-script-timecode-format">
          </div>
        </div>
        <div class="form-item">
          <label for="fmt-script-fps">Frame Rate Override (FPS)</label>
          <input type="number" id="fmt-script-fps" min="1" max="120" step="0.001" placeholder="Auto" />
        </div>
        <div class="form-item">
          <label for="fmt-script-tc-start">Start Timecode Offset</label>
          <input type="text" id="fmt-script-tc-start" value="01:00:00:00" placeholder="01:00:00:00" />
        </div>
      </div>
    </details>

    <!-- SCC Alignment + CC Channel (side-by-side with headers) -->
    <div class="video-grid-2col" id="scc-alignchan-wrap" style="display:none;">
      <div class="form-item" id="scc-align-row">
        <label for="scc-alignment">Caption Alignment</label>
        <div class="dropdown-wrapper dropdown-display compact">
          <input class="chosen-value" type="text" placeholder="Alignment" />
          <ul class="value-list"></ul>
          <span class="dropdown-arrow"></span>
          <input type="hidden" id="scc-alignment" name="scc-alignment" />
        </div>
      </div>
      <div class="form-item" id="scc-channel-row">
        <label for="scc-channel">CC Channel</label>
        <div class="dropdown-wrapper dropdown-display compact">
          <input class="chosen-value" type="text" placeholder="CC Channel" />
          <ul class="value-list"></ul>
          <span class="dropdown-arrow"></span>
          <input type="hidden" id="scc-channel" name="scc-channel" />
        </div>
      </div>
    </div>

    <!-- SCC-only: Row policy (row pair) -->
    <div class="field-group horizontal" id="scc-row-policy-row" style="display:none;">
      <label for="scc-row-policy">Row policy</label>
      <div class="dropdown-wrapper dropdown-display compact">
        <input class="chosen-value" type="text" placeholder="Row policy" />
        <ul class="value-list"></ul>
        <span class="dropdown-arrow"></span>
        <input type="hidden" id="scc-row-policy" name="scc-row-policy" />
      </div>
    </div>

    <!-- (Removed legacy SCC rows: mode, roll-up clear, EOF/EDM, legacy font comment, XML sidecar) -->

<!-- 3. Enhancements -->
      <details>
        <summary><strong><span data-i18n="enhancements"></span></strong></summary>

        <div class="checkbox-grid spaced-top enhancements-grid">
          <!-- Audio Analysis -->
          <label class="enhancement-heading">Audio Analysis</label>
          <label><input type="checkbox" id="transcribe-use-tracks" /><span data-i18n="useAltAudioTrack"></span></label>
          <label><input type="checkbox" id="acc-boost" /><span data-i18n="boostClarity"></span></label>

          <!-- Text Enhancement -->
          <label class="enhancement-heading">Text Enhancement</label>
          <label><input type="checkbox" id="acc-auto-punct" /><span data-i18n="autoPunctuate"></span></label>
          <label><input type="checkbox" id="acc-smart-cap" /><span data-i18n="smartCapitalization"></span></label>
          <label><input type="checkbox" id="acc-spellcheck" /><span data-i18n="spellcheck"></span></label>

          <!-- Safety Filters -->
          <label class="enhancement-heading">Safety Filters</label>
          <label><input type="checkbox" id="acc-redact" /><span data-i18n="redactExplicit"></span></label>

          <!-- Content Cleanup -->
          <label class="enhancement-heading">Content Cleanup</label>
          <label>
            <input type="checkbox" id="transcribe-filter-nonspeech" />
            <span data-i18n="removeNonSpeech"></span>
          </label>
          <label>
            <input type="checkbox" id="transcribe-remove-fillers" />
            <span data-i18n="removeFillers"></span>
          </label>
          <label><input type="checkbox" id="transcribe-rename" /><span data-i18n="renameMatchSource"></span></label>

          <!-- Metadata / Export -->
          <label class="enhancement-heading">Metadata / Export</label>
          <label>
            <input type="checkbox" id="transcribe-embed" />
            <span data-i18n="embedInMetadata"></span>
          </label>
        </div>
      </details>

      <!-- 4. Translate -->
      <details>
        <summary><strong><span data-i18n="translate"></span></strong></summary>
        <div class="field-group horizontal">
          <label><input type="checkbox" id="translate-enable" /><span data-i18n="translateOutput"></span></label>
          <div class="dropdown-wrapper dropdown-display">
            <input class="chosen-value" type="text" placeholder="Language">
            <ul class="value-list"></ul>
            <span class="dropdown-arrow"></span>
            <input type="hidden" id="translate-target" name="translate-target">
          </div>
          <label><input type="checkbox" id="translate-side-by-side" /><span data-i18n="translateSideBySide"></span></label>
        </div>
      </details>
      
        <!-- Automation / Webhook Integration -->
    <details data-webhook-section>
      <summary><strong><span data-i18n="automationIntegration"></span></strong></summary>

      <div class="field-group">
        <label><input type="checkbox" id="transcribe-enable-n8n" /><span data-i18n="transcribeEnableN8N"></span></label>
        <input type="text" id="transcribe-n8n-url" placeholder="" data-i18n="transcribeN8NUrl" />
        <label><input type="checkbox" id="transcribe-n8n-log" /><span data-i18n="transcribeN8NLog"></span></label>
      </div>

    </details>

    <!-- Watch Mode -->
    <details>
      <summary><strong><span data-i18n="watchMode"></span></strong></summary>
      <div class="field-group">
        <label><input type="checkbox" id="transcribe-watch-mode" /><span data-i18n="enableWatchMode"></span></label>
        <span id="transcribe-watch-state" class="watch-state"></span>
      </div>
    </details>

    <!-- 5. File Output & Post-Actions -->

    <!-- Summary Preview -->
      <pre id="live-transcript-output" class="whitespace-pre-wrap p-2 border rounded h-64 overflow-y-auto bg-black text-white font-mono text-sm"></pre>

      <textarea id="transcribe-notes" placeholder="" data-i18n="transcribeNotes"></textarea>

      <!-- Controls -->
    <div class="field-group horizontal" id="transcribe-controls-row">
      <button id="start-transcribe" data-i18n="startTranscribe"></button>
      <button id="reset-transcribe" class="btn-danger" data-i18n="resetTranscribe"></button>
      <button id="cancel-transcribe" class="btn-danger" data-i18n="cancelTranscribe"></button>

      <!-- Inline status text (replaces progress bar) -->
      <div id="transcribe-loader-inline" aria-live="polite" style="display:none">
        <span class="eta-inline" id="transcribe-status-text">transcribing...</span>
      </div>

      <!-- Hamster wheel, right-aligned (same structure as other panels) -->
      <div id="transcribe-job-status" style="display:none;">
        <div class="wheel-and-hamster"></div>
      </div>
    </div>

    </div> <!-- end of transcribe-lock-wrapper -->

    <!-- Summary -->
      <h3><span data-i18n="summary"></span></h3>
      <div id="transcribe-summary" class="status-log"></div>

    <!-- (progress bar removed; indeterminate spinner + text is shown inline above) -->
  </div>
</div>

<!-- ==================== SPEED TEST PANEL ==================== -->
<div id="speed-test" class="panel-section hidden">
  <div class="section">
    <div class="panel-toolbar-controls">
      <div class="tooltip-container">
        <div class="icon">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor"
               stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <circle cx="12" cy="12" r="10" />
            <line x1="12" y1="16" x2="12" y2="12" />
            <line x1="12" y1="8"  x2="12" y2="8" />
          </svg>
        </div>
        <div class="tooltip tooltip-bottom" id="speed-test-overview-tooltip"></div>
      </div>
    </div>

    <!-- Network Test -->
    <h3><span data-i18n="networkTest"></span></h3>
    <div class="field-group horizontal">
      <button id="start-network-test" data-i18n="runNetworkTest"></button>
    </div>
    <div id="network-test-results" class="status-log spaced-bottom"><span data-i18n="noNetworkResults"></span></div>
    
    <!-- Drive Tests -->
    <div class="heading-with-tooltip">
      <h3><span data-i18n="driveTests"></span></h3>
      <div class="tooltip-container">
        <div class="icon">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <circle cx="12" cy="12" r="10" />
            <line x1="12" y1="16" x2="12" y2="12" />
            <line x1="12" y1="8" x2="12" y2="8" />
          </svg>
        </div>
        <div class="tooltip" id="speedtest-info-tooltip"></div>
      </div>
    </div>
    <div id="drive-tests" class="spaced-top">
      <div class="field-group horizontal">
        <button id="select-drive-1" data-i18n="selectDrive1"></button>
        <button id="select-drive-2" data-i18n="selectDrive2"></button>
        <button id="select-drive-3" data-i18n="selectDrive3"></button>
      </div>
      <div id="selected-drive-paths" class="status-log" data-i18n="noDrivesSelected"></div>
      <div class="video-grid-2col spaced-top">
        <div class="form-item">
          <label for="test-size" data-i18n="testSize">Test Size</label>
          <div class="dropdown-wrapper dropdown-display">
            <input class="chosen-value" type="text" placeholder="Select Test Size">
            <ul class="value-list"></ul>
            <span class="dropdown-arrow"></span>
            <input type="hidden" id="test-size" name="test-size">
          </div>
        </div>

        <div class="form-item">
          <label for="io-mode" data-i18n="mode">Mode</label>
          <div class="dropdown-wrapper dropdown-display">
            <input class="chosen-value" type="text" placeholder="Select Mode">
            <ul class="value-list"></ul>
            <span class="dropdown-arrow"></span>
            <input type="hidden" id="io-mode" name="io-mode">
          </div>
        </div>
      </div>

      <!-- Run Test Button Row -->
      <div class="field-group horizontal spaced-top">
        <button id="test-selected-drives" data-i18n="testSelectedDrives"></button>
      </div>
    </div>

    <div id="drive-test-results" class="status-log"><span data-i18n="noDriveResults"></span></div>

    <!-- Speed Test controls row (Reset + inline loader + hamster) -->
    <div class="field-group horizontal spaced-top" id="speedtest-controls-row">
      <button id="reset-speedtest" class="btn-danger" data-i18n="resetSpeedTest"></button>

      <div id="speedtest-loader-inline" aria-live="polite">
        <progress id="speedtest-progress" max="100" value="0"></progress>
        <output id="speedtest-progress-output"></output>
      </div>

      <!-- Hamster, same structure/scale used in other panels -->
      <div id="speedtest-job-status" aria-hidden="true"></div>
    </div>

    <!-- Summary -->
    <h3><span data-i18n="summary"></span></h3>
    <div id="speedtest-summary" class="status-log"><span data-i18n="readyToTest"></span></div>

  </div>
</div>

      </main>
    </div><!-- window-content -->
    </div><!-- app -->


  <script>
    // Lightweight in-browser demo setup: i18n (English only) + sidebar navigation.
    const LEADAE_TRANSLATIONS = {
  "ok": "OK",
  "cancel": "Cancel",
  "language": "Language",
  "preferences": "Preferences",
  "save": "Save",
  "load": "Load",
  "refresh": "Refresh",
  "reset": "Reset",
  "automate": "Automate",
  "reconnect": "Reconnect",
  "connected": "Connected",
  "selectSource": "Select Source",
  "selectDestination": "Destination",
  "selectBackup": "Backup",
  "noSourceSelected": "No source selected",
  "noDestinationSelected": "No destination selected",
  "noBackupSelected": "No backup selected",
  "enableBackup": "Enable Backup",
  "autoCreateFolder": "Auto Create Folder",
  "saveLog": "Save Log",
  "sendLog": "Send Log",
  "checksum": "Checksum",
  "byteCompare": "Byte Compare",
  "watchMode": "Watch Mode",
  "enableWatchMode": "Enable Watch Mode",
  "summary": "Summary",
  "queueJobs": "Queue Jobs",
  "fileName": "File Name",
  "copy": "Copy",
  "backup": "Backup",
  "verified": "Verified",
  "cached": "Cached",
  "preferencesSaved": "Preferences saved",
  "preferencesReset": "Preferences reset",
  "enableSystemNotifications": "Enable System Notifications",
  "enableOfflineMode": "Enable Offline Mode",
  "themeAppearance": "Theme",
  "lightMode": "Light Mode",
  "darkMode": "Dark Mode",
  "themePlaceholder": "Light/Dark",
  "languagePlaceholder": "Language",
  "aiSettings": "AI Settings",
  "aiApiKey": "AI API Key",
  "webhooksIntegration": "Webhooks & Integration",
  "webhookUrlPlaceholder": "Webhook URL (e.g., https://your.api/hook)",
  "enableWebhookLogging": "Enable Webhook Logging",
  "sendOnlyOnFailure": "Send Only on Failure",
  "adobeAutomate": "Adobe Automate",
  "folderSelection": "Folder Selection",
  "importOptions": "Import Options",
  "importIntoPremiere": "Import into Premiere",
  "createPremiereBins": "Create Premiere Bins",
  "generateProxies": "Generate Proxies",
  "proxySettings": "Proxy Settings",
  "selectProxyDestination": "Proxy Destination",
  "noProxyDestinationSelected": "No proxy destination selected",
  "selectProxyPreset": "-- Select Proxy Preset --",
  "loadPreset": "Load Preset",
  "unassignedFiles": "Unassigned Files",
  "dragFilesIntoBins": "Drag files into bins",
  "binSetup": "Bin Setup",
  "dragBinsToOrder": "Drag bins to order",
  "newBinName": "New Bin Name",
  "addBin": "Add Bin",
  "addSubBin": "Add Sub-bin",
  "ingest": "Ingest",
  "ingestPanel": "Ingest Panel",
  "cloneMode": "Clone Mode",
  "folderFilters": "Folder Filters",
  "filterFoldersPlaceholder": "Filter folders...",
  "selectAll": "Select All",
  "showFileCount": "Show File Count",
  "folderTreePlaceholder": "Folder tree will appear here...",
  "fileHandlingOptions": "File Handling Options",
  "skipDuplicates": "Skip Duplicate Files",
  "flattenStructure": "Flatten Structure",
  "includeExtensions": "Include Extensions (comma-separated)",
  "excludeExtensions": "Exclude Extensions (comma-separated)",
  "verificationLogging": "Verification & Logging",
  "automationIntegration": "Automation / Webhook Integration",
  "webhook": "Webhook",
  "webhookUrlPlaceholderSimple": "Webhook URL",
  "ingestBehavior": "Ingest Behavior",
  "parallelCopy": "Parallel Copy",
  "autoThreads": "Auto Threads",
  "retryFailures": "Retry Failures",
  "threads": "Threads",
  "ingestNotes": "Ingest Notes...",
  "startIngest": "Start",
  "resetIngest": "Reset",
  "cancelIngest": "Cancel",
  "readyToIngest": "Ready to ingest",
  "readyToClone": "Ready to clone",
  "transcribe": "Transcribe",
  "transcribePanel": "Transcribe Panel",
  "transcribeSelectFiles": "Select Source",
  "transcribeNoSource": "No source selected",
  "transcribeOutputSelect": "Destination",
  "transcribeNoDestination": "No destination selected",
  "transcribeFileInfo": "Select a file to see details...",
  "engineSettings": "Engine Settings",
  "engine": "Engine",
  "accuracy": "Accuracy",
  "confidence": "Confidence",
  "offlineOnly": "Offline Only",
  "enableFallback": "Enable Fallback",
  "plainText": "Plain Text (.txt)",
  "srt": "SubRip (.srt)",
  "vtt": "WebVTT (.vtt)",
  "scripted": "Scripted (CSV/DOCX)",
  "xmlMarkers": "XML / Markers",
  "burnIn": "Burn-in MP4",
  "jsonWithTimestamps": "JSON with Timestamps",
  "subtitleOptions": "Subtitle Options (.srt / .vtt)",
  "maxCharsPerLine": "Max characters per line",
  "maxLinesPerBlock": "Max lines per subtitle block",
  "maxSubtitleDuration": "Max subtitle duration (sec.)",
  "includeStyleMetadata": "Include style metadata (VTT)",
  "textOptions": "Text Options (.txt / Script)",
  "timestampPlacement": "Timestamp Placement",
  "speakerLabelStyle": "Speaker Label Style",
  "exportFormat": "Export Format (Scripted)",
  "groupBySpeaker": "Group by Speaker",
  "outputFormatting": "Output Formatting",
  "includeSpeakerNames": "Include Speaker Names",
  "removeNonSpeech": "Remove Non-Speech Tags",
  "removeFillers": "Remove Filler Words",
  "renameMatchSource": "Rename to Match Source",
  "includeTimecodes": "Include Timecodes",
  "timecodeFormat": "Timecode Format",
  "fpsOverride": "Frame Rate Override (FPS)",
  "startTimecodeOffset": "Start Timecode Offset",
  "useDropFrame": "Use Drop-Frame Timecode",
  "embedInMetadata": "Embed in Metadata",
  "fileNamingTemplate": "File Naming Template",
  "formatTemplatePresets": "Format Template Presets",
  "enhancements": "Enhancements",
  "useAltAudioTrack": "Use Alt Audio Track",
  "boostClarity": "Boost Clarity",
  "autoPunctuate": "Auto-Punctuate",
  "smartCapitalization": "Smart Capitalization",
  "spellcheck": "Spellcheck",
  "redactExplicit": "Redact Explicit Language",
  "translate": "Translate",
  "translateOutput": "Translate Output",
  "translateTarget": "Target Language",
  "translateSideBySide": "Side-by-Side Format",
  "transcribeEnableN8N": "Webhook",
  "transcribeN8NLog": "Send Log",
  "transcribeN8NUrl": "Webhook URL",
  "transcribeWatchMode": "Enable Watch Mode",
  "transcribeNotes": "Transcribe Notes...",
  "startTranscribe": "Start",
  "resetTranscribe": "Reset",
  "cancelTranscribe": "Cancel",
  "transcribeSummary": "Summary",
  "readyToTranscribe": "Ready to Transcribe",
  "noFileLoaded": "No file loaded",
  "selectFormatPreview": "Select output format to preview",
  "projectOrganizer": "Project Organizer",
  "organizerPanel": "Project Organizer Panel",
  "saveConfig": "Save",
  "loadConfig": "Load",
  "prependNumbering": "Prepend Numbering",
  "dragFoldersToOrder": "Drag folders to select and order",
  "customFolderName": "New Custom Folder Name",
  "addCustomFolder": "+ Add Folder",
  "addSubfolder": "+ Add Subfolder",
  "projectName": "Project Name",
  "rootFolderPlaceholder": "Project/Root Folder Name",
  "selectOutputLocation": "Select Output Location",
  "outputPath": "Output Path",
  "generateProjectFolders": "Generate Folder Structure",
  "resetProjectOrganizer": "Reset",
  "noStructureDefined": "No structure defined yet.",
  "nleUtilities": "NLE Utilities",
  "nleUtilitiesPanel": "NLE Utilities Panel",
  "avidUtilities": "Avid Utilities",
  "avidSelectFolder": "Select Avid Folder",
  "noAvidFolderSelected": "No folder selected...",
  "avidDeleteDb": "Clear All DB Files",
  "avidResetSite": "Reset Site Settings",
  "avidResetUser": "Reset User Settings",
  "avidRebuildDb": "Rebuild Media Databases",
  "avidScanSubfolders": "Scan Subfolders",
  "avidBackupSettings": "Backup Before Reset",
  "avidSummary": "Avid summary will appear here.",
  "adobeUtilities": "Adobe Utilities",
  "adobeSelectFolder": "Select Adobe Folder",
  "noAdobeFolderSelected": "No folder selected...",
  "adobeClearCache": "Clear Media Cache",
  "adobeDeleteAutosaves": "Clear Autosaves",
  "adobeRemovePreviews": "Clear Preview Files",
  "adobeSkipRecent": "Exclude Recent Files",
  "adobeAgeDays": "Days",
  "adobeAutomateNotes": "Adobe Automate notes...",
  "adobeSummary": "Adobe cleanup summary will appear here.",
  "resetNleUtilities": "Reset",
  "logViewer": "Log Viewer",
  "logViewerPanel": "Log Viewer Panel",
  "logFilters": "Log Filters",
  "viewByDate": "View by Date",
  "today": "Today",
  "last7Days": "Last 7 Days",
  "customRange": "Custom Range",
  "viewByTool": "View by Tool",
  "allTools": "All",
  "onlyErrorsWarnings": "Show Only Errors / Warnings",
  "toolIngest": "Ingest",
  "toolTranscode": "Transcode",
  "toolClone": "Clone",
  "toolTranscribe": "Transcribe",
  "toolOrganizer": "Project Organizer",
  "toolAdobe": "Adobe Automate",
  "toolNle": "NLE Utilities",
  "logSearch": "Search Logs",
  "includeSystemLogs": "Include System Logs",
  "logsWillAppearHere": "Logs will appear here...",
  "noLogsFound": "No logs found.",
  "expandTaskDetails": "Expand Task Details",
  "resetViewer": "Reset Viewer",
  "exportLogs": "Export Logs",
  "exportFolder": "Select Export Folder",
  "exportComplete": "Export complete!",
  "transcode": "Transcode",
  "transcodePanel": "Transcode Panel",
  "selectInputFiles": "Select Source",
  "noInputSelected": "No source selected",
  "selectOutput": "Destination",
  "noOutputSelected": "No destination selected",
  "transcodeFileInfo": "Select a file to see details...",
  "videoSettings": "Video Settings",
  "matchSource": "Match Source",
  "outputFormat": "Output Format",
  "containerFormat": "Container",
  "resolution": "Resolution",
  "frameRate": "Frame Rate",
  "crf": "CRF",
  "pixelFormat": "Pixel Format",
  "colorRange": "Color Range",
  "fieldOrder": "Field Order",
  "audioSettings": "Audio Settings",
  "audioOnly": "Audio Only",
  "audioCodec": "Codec",
  "channels": "Channels",
  "sampleRate": "Sample Rate",
  "audioBitrate": "Bitrate",
  "audioDelay": "Delay (ms)",
  "normalizeAudio": "Normalize Audio",
  "transcodeSaveLog": "Save Log",
  "transcodeVerificationMethod": "Verification Method",
  "transcodeEnableN8N": "Webhook",
  "transcodeN8NLog": "Send Log",
  "transcodeN8NUrl": "Webhook URL",
  "transcodeWatchMode": "Enable Watch Mode",
  "transcodeNotes": "Transcode Notes...",
  "startTranscode": "Start",
  "resetTranscode": "Reset",
  "cancelTranscode": "Cancel",
  "transcodeSummary": "Summary",
  "readyToTranscode": "Ready to Transcode",
  "sourceFile": "Source File",
  "outputFile": "Output",
  "transcoded": "Transcoded",
  "speedTest": "Speed Test",
  "speedTestPanel": "Speed Test Panel",
  "networkTest": "Network Test",
  "runNetworkTest": "Run Network Speed Test",
  "noNetworkResults": "No results yet.",
  "runningNetworkTest": "Running network speed test...",
  "networkResults": "Results",
  "driveTests": "Drive Tests",
  "selectDrive1": "Select Drive 1",
  "selectDrive2": "Select Drive 2",
  "selectDrive3": "Select Drive 3",
  "noDrivesSelected": "No drives selected",
  "testSize": "Test Size",
  "mode": "Mode",
  "sequential": "Sequential",
  "random": "Random",
  "testSelectedDrives": "Test Speed",
  "noDriveResults": "No results yet.",
  "resetSpeedTest": "Reset",
  "readyToTest": "Ready to test.",
  "presetsPlaceholder": "Presets",
  "reportBug": "Report Bug",
  "resumePreviousJob": "Resume previous unfinished job?"
};

    document.addEventListener('DOMContentLoaded', () => {
      // --- Basic English-only translation ---
      document.querySelectorAll('[data-i18n]').forEach(el => {
        const key = el.getAttribute('data-i18n');
        const text = LEADAE_TRANSLATIONS[key] || key;
        if (!text) return;

        const tag = el.tagName;
        if (tag === 'INPUT' || tag === 'TEXTAREA') {
          if (!el.placeholder) el.placeholder = text;
        } else {
          if (!el.textContent.trim()) el.textContent = text;
        }
      });

      // --- Make sure the main panel is visible in prototype mode ---
      const appRoot = document.getElementById('app');
      if (appRoot) appRoot.classList.add('panel-open');

      const mainPanel = document.querySelector('.main-panel');
      if (mainPanel) mainPanel.classList.remove('hidden');

      // --- Simple sidebar tab switching (purely visual) ---
      const tabs = Array.from(document.querySelectorAll('.lae-navbtn'));
      const panels = Array.from(document.querySelectorAll('.panel-section'));

      function activatePanel(panelId) {
        panels.forEach(panel => {
          panel.classList.toggle('hidden', panel.id !== panelId);
        });
        tabs.forEach(tab => {
          tab.classList.toggle('active', tab.dataset.panel === panelId);
        });
      }

      if (tabs.length) {
        const firstPanelId = tabs[0].dataset.panel;
        activatePanel(firstPanelId);

        tabs.forEach(tab => {
          tab.addEventListener('click', evt => {
            evt.preventDefault();
            activatePanel(tab.dataset.panel);
          });
        });
      }

      // --- Optional: simple light/dark toggle (visual only) ---
      const themeToggle = document.getElementById('theme-toggle');
      if (themeToggle) {
        themeToggle.addEventListener('change', () => {
          document.body.classList.toggle('dark-mode', !!themeToggle.checked);
        });
      }
    });
  </script>
</body>
</html>
